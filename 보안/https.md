## 1. https란?

---

- http와 마찬가지로 서버, 클라이언트간에 데이터를 주고받기위한 규칙임, 기존 http 방식에 ssl, tls 알고리즘을 적용해 데이터를 암호화시켜 전송한다.
- TCP 위에 SSL/TSL 층을 추가하여 암호화, 인증 그리고 무결성 보장을 통해 더 안전하게 만들어주는 프로토콜
- TSL : SSL을 기반으로한 암호화 프로토콜(업그레이드 된 버전)

---

## 2. 대칭키, 공개키

---

### 1. 대칭키

- 동일한 키로 암호화와 복호화를 할 수 있는 방식
- 웹에서 대칭키만 사용할 경우 대칭키 전달은 암호화 될 수 없기 때문에 보안상의 문제가 발생한다.

---

### 2. 공개키

- 공개키 방식에는 공개키와 비밀키가 존재함
- 비밀키로 작성한값은 공개키로만 열 수 있고 공개키로 작성한값은 비밀키로만 열 수 있다.
- 대칭키와 달리 공개된 공간에서도 보안을 확보 할수 있음
  - ex) 클라이언트가 서버에 전달(공개키를 사용한 암호화 데이터)하면 해당데이터는 비밀키를가진 서버만 복호화 할 수 있음
- 공개키는 대칭키에 비하여 속도가 느림

---

## 3. 브라우저와 SSL

---

- 서버에서 클라이언트로 제공하는 공개키를 사용하면 클라이언트, 서버간 보안 확보가능
- 클라이언트 입장에서는 해당방식이 안전한지 확인할 수 없음
- 보안과정이 공인된 제 3자에게 보안방식을 보장 받을수 있음 (CA)

### CA

- SSL 인증기관
- 서버는 CA로 부터 SSL 인증서를 발급받음.
- 서버는 인증서 발급 과정에서 자신의 비밀키를 입력
- 인증과정
  - 클라이언트가 서버에 접속하면 서버는 클라이언트에게 SSL 인증서를 제공
  - 클라이언트는 인증서를 가지고 해당 CA에 서버가 등록되어 있는지 확인
  - CA로 부터 받은 공개키로 서버에서 암호화 한 값을 복호화

## 4. HTTPS 통신과정 및 원리

- HTTPS는 대칭키, 공개키 전부를 사용하는 하이브리드 방식
- 데이터 전송을 위해 대칭키 방식을 사용하며, 대칭키를 안전하게 전달하기 위해 공개키 방식을 사용함

![과정](https://oopy.lazyrockets.com/api/v2/notion/image?src=https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fd5921023-63eb-44a1-9426-5c6078775ed1%2FUntitled.png&blockId=2839b829-4de6-4ff9-979a-ab27815e75f8)

출처 : [https://mysterico.tistory.com/30](https://mysterico.tistory.com/30)

### 과정

1. [클라이언트 → 서버] 브라우저가 지원하는 암호화 알고리즘과, TSL 버전에 대한 정보를 전송, 추가적으로 임의의 난수를 생성하여 전송함
2. [서버 → 클라이언트] 사용할 암호화 알고리즘, TSL 버전 정보 전송, 추가적으로 임의의 난수를 생성하여 전송함
3. [서버 → 클라이언트] CA로 부터 발급받은 인증서를 클라이언트에 전달
4. [서버 → 클라이언트] 키 교환에 필요한 정보 제공(생략가능)
5. [클라이언트 → 서버] 서버가 클라이언트를 인증해야할경우 클라이언트가 인증서 전달(생략가능)
6. [클라이언트 → 서버] `pre-master-key` 라는 걸 전송함. 1, 2에서 생성한 임의의 난수를 조합하여 생성하며 데이터 교환시 암호화, 복호화에 쓰일 대칭키로 사용함.
   **안전한 대칭키 전송을 위해 공개키 방식을 사용 → 대칭키를 전달하기 위한 공개키 사용**
7. [서버 → 클라이언트] 클라이언트로 받은 `pre-master-key` 를 복호화 한 후 `master-key` 로 사용하기 위해 이렇게 저렇게 사용한다! 라고 보내는 알림

---

참고자료

[https://mysterico.tistory.com/30](https://mysterico.tistory.com/30)

[https://velog.io/@infoqoch/HTTPS의-SSL의-작동방식](https://velog.io/@infoqoch/HTTPS%EC%9D%98-SSL%EC%9D%98-%EC%9E%91%EB%8F%99%EB%B0%A9%EC%8B%9D)
